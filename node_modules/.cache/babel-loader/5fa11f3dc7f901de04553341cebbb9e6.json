{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andrew\\\\source\\\\repos\\\\OverStats\\\\src\\\\pages\\\\SearchPage\\\\SearchPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport NavBar from '../../components/NavBar/NavBar';\nimport MobileNavBar from '../../components/MobileNavBar/MobileNavBar';\nimport SearchForm from '../../components/SearchForm/SearchForm';\nimport ProfileInfo from '../../components/ProfileInfo/ProfileInfo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchPage(_ref) {\n  _s();\n  let {\n    handleLogOut,\n    user\n  } = _ref;\n  const [error, setError] = useState('');\n  const [apiLink, setApiLink] = useState(``);\n  const [searchData, setSearchData] = useState({});\n  const [ready, setReady] = useState(false);\n\n  //this updates with the users input\n  const [state, setState] = useState({\n    battletag: '',\n    platform: '',\n    region: ''\n  });\n\n  // this updates state\n  function handleChange(e) {\n    //getting name keys for dropdowns\n    let name;\n    if (e.target.textContent === 'PC' || e.target.textContent === 'XBL' || e.target.textContent === 'PSN') {\n      name = \"platform\";\n    }\n    if (e.target.textContent === 'US' || e.target.textContent === 'EU' || e.target.textContent === 'ASIA') {\n      name = \"region\";\n    }\n    if (e.target.name) {\n      setState({\n        ...state,\n        [e.target.name]: e.target.value\n      });\n    } else {\n      setState({\n        ...state,\n        [name]: e.target.textContent\n      });\n    }\n  }\n\n  //updating api link to fetch after user input\n  async function handleSubmit() {\n    let p = state.battletag.replace('#', '-');\n    let platform = state.platform.toLowerCase();\n    let region = state.region.toLowerCase();\n    setApiLink(`https://ow-api.com/v1/stats/${platform}/${region}/${p}/complete`);\n  }\n  useEffect(() => {\n    function makeApiCall() {\n      fetch(apiLink) // calling api to retrieve player data\n      .then(res => res.json()).then(data => {\n        setSearchData(data);\n        if (data.error) {\n          setReady(false); /// if fetch fails from invalid input set to false to keep search form shown on page\n          setError(data.error);\n        } else {\n          setReady(true);\n        }\n      }).catch(err => console.log(err));\n    }\n    ;\n    if (apiLink !== '') {\n      makeApiCall();\n    }\n  }, [apiLink]);\n\n  //this will be set true when fetch is successful. It will then show profileinfo componenent and hide searchform\n  function onClick() {\n    ready ? setReady(false) : setReady(true);\n  }\n\n  //refresh page when ready changes from true to false or false to true\n  useEffect(() => {}, [ready]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main\",\n    className: \"ui vertically divided grid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"non-mobile-tablet-profile\",\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar\",\n        className: \"three wide column BigLogo\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"BigLogo-content\",\n          children: /*#__PURE__*/_jsxDEV(NavBar, {\n            onClick: onClick,\n            user: user,\n            handleLogOut: handleLogOut\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blue thirteen wide column LandingMessage\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: ready ? /*#__PURE__*/_jsxDEV(ProfileInfo, {\n            profile: false,\n            name: state.battletag,\n            profileData: searchData,\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 34\n          }, this) : /*#__PURE__*/_jsxDEV(SearchForm, {\n            error: error,\n            state: state,\n            handleChange: handleChange,\n            handleSubmit: handleSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 128\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"mobile-tablet-profile\",\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"mobile-content\",\n        className: \"blue sixteen wide column\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MobileNavBar, {\n          className: \"mobile-nav-buttons\",\n          user: user,\n          handleLogOut: handleLogOut\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: ready ? /*#__PURE__*/_jsxDEV(ProfileInfo, {\n            profile: false,\n            name: state.battletag,\n            profileData: searchData,\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 34\n          }, this) : /*#__PURE__*/_jsxDEV(SearchForm, {\n            error: error,\n            state: state,\n            handleChange: handleChange,\n            handleSubmit: handleSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 128\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchPage, \"s7ZDOn3X1FQbp0U2YBKh/7XGHEc=\");\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","NavBar","MobileNavBar","SearchForm","ProfileInfo","SearchPage","handleLogOut","user","error","setError","apiLink","setApiLink","searchData","setSearchData","ready","setReady","state","setState","battletag","platform","region","handleChange","e","name","target","textContent","value","handleSubmit","p","replace","toLowerCase","makeApiCall","fetch","then","res","json","data","catch","err","console","log","onClick"],"sources":["C:/Users/Andrew/source/repos/OverStats/src/pages/SearchPage/SearchPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport NavBar from '../../components/NavBar/NavBar';\r\nimport MobileNavBar from '../../components/MobileNavBar/MobileNavBar';\r\nimport SearchForm from '../../components/SearchForm/SearchForm'\r\nimport ProfileInfo from '../../components/ProfileInfo/ProfileInfo'\r\n\r\n\r\n\r\nexport default function SearchPage({ handleLogOut, user }) {\r\n\r\n\r\n    const [error, setError] = useState('')\r\n    const [apiLink, setApiLink] = useState(``)\r\n    const [searchData, setSearchData] = useState({})\r\n    const [ready, setReady] = useState(false)\r\n\r\n    //this updates with the users input\r\n    const [state, setState] = useState({\r\n        battletag: '',\r\n        platform: '',\r\n        region: ''\r\n    });\r\n\r\n    // this updates state\r\n    function handleChange(e) {\r\n        //getting name keys for dropdowns\r\n        let name;\r\n        if (e.target.textContent === 'PC' || e.target.textContent === 'XBL' || e.target.textContent === 'PSN') {\r\n            name = \"platform\"\r\n        }\r\n        if (e.target.textContent === 'US' || e.target.textContent === 'EU' || e.target.textContent === 'ASIA') {\r\n            name = \"region\"\r\n        }\r\n\r\n        if (e.target.name) {\r\n            setState({\r\n                ...state,\r\n                [e.target.name]: e.target.value\r\n            })\r\n        } else {\r\n            setState({\r\n                ...state,\r\n                [name]: e.target.textContent\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    //updating api link to fetch after user input\r\n    async function handleSubmit() {\r\n        let p = state.battletag.replace('#', '-')\r\n        let platform = state.platform.toLowerCase()\r\n        let region = state.region.toLowerCase()\r\n        setApiLink(`https://ow-api.com/v1/stats/${platform}/${region}/${p}/complete`)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        function makeApiCall() {\r\n            fetch(apiLink) // calling api to retrieve player data\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n                    setSearchData(data)\r\n                    if (data.error) {\r\n                        setReady(false) /// if fetch fails from invalid input set to false to keep search form shown on page\r\n                        setError(data.error)\r\n                    } else {\r\n                        setReady(true)\r\n                    }\r\n\r\n                })\r\n                .catch((err) => console.log(err))\r\n        };\r\n        if (apiLink !== '') {\r\n            makeApiCall();\r\n        }\r\n\r\n    }, [apiLink])\r\n\r\n    //this will be set true when fetch is successful. It will then show profileinfo componenent and hide searchform\r\n    function onClick() {\r\n        ready ? setReady(false) : setReady(true)\r\n    }\r\n\r\n    //refresh page when ready changes from true to false or false to true\r\n    useEffect(() => {\r\n\r\n\r\n    }, [ready])\r\n\r\n\r\n    return (\r\n        <div id=\"main\" className=\"ui vertically divided grid\">\r\n            <div id='non-mobile-tablet-profile' className=\"row\">\r\n                <div id=\"sidebar\" className=\"three wide column BigLogo\">\r\n                    <div className=\"BigLogo-content\">\r\n                        <NavBar onClick={onClick} user={user} handleLogOut={handleLogOut} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"blue thirteen wide column LandingMessage\">\r\n                    \r\n                    <div className=\"content\">\r\n                        {ready ? <ProfileInfo profile={false} name={state.battletag} profileData={searchData} user={user} /> : <SearchForm error={error} state={state} handleChange={handleChange} handleSubmit={handleSubmit} />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id='mobile-tablet-profile' className=\"row\">\r\n                <div  id='mobile-content' className=\"blue sixteen wide column\">\r\n                    <br />\r\n                <MobileNavBar className=\"mobile-nav-buttons\" user={user} handleLogOut={handleLogOut} />\r\n                    <div className=\"content\">\r\n                        {ready ? <ProfileInfo profile={false} name={state.battletag} profileData={searchData} user={user} /> : <SearchForm error={error} state={state} handleChange={handleChange} handleSubmit={handleSubmit} />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}